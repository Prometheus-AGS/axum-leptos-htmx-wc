<!DOCTYPE html>
<html lang="en" class="">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /> [7]
    <title>Prometheus • Flat Material 3 Zones • HTMX Shell</title>

    <!-- HTMX (version per your requirement; not specified in provided references) -->
    <script src="https://unpkg.com/htmx.org@2.0.8"></script>

    <!-- Fonts (Google) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@500;600;700&family=Source+Sans+3:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,600,0,0"
    />

    <style>
      /* Reset */
      * { margin: 0; padding: 0; box-sizing: border-box; }
      html, body { height: 100%; }
      body { min-height: 100%; }

      /* Tokens-first: all colors must come from CSS variables. [3] */
      :root {
        --font-sans: "Source Sans 3", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        --font-head: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;

        /* Material 3 dynamic theming: configurable primary hue + derived tokens. [1] */
        --primary-hue: 278; /* purple/violet family derived from logo direction */

        /* Brand */
        --primary: hsl(var(--primary-hue), 60%, 50%); [1]
        --on-primary: hsl(0, 0%, 100%);

        /* Surface container levels (zones) derived from primary hue. [1] */
        --surface-container-lowest: hsl(var(--primary-hue), 8%, 98%); [1]
        --surface-container-low:    hsl(var(--primary-hue), 10%, 96%); [1]
        --surface-container:        hsl(var(--primary-hue), 12%, 94%);
        --surface-container-high:   hsl(var(--primary-hue), 14%, 92%);

        /* Text */
        --on-surface: hsl(var(--primary-hue), 18%, 12%);
        --on-surface-variant: hsl(var(--primary-hue), 10%, 40%);

        /* Accent zone */
        --accent-container: hsl(var(--primary-hue), 40%, 92%);
        --on-accent-container: hsl(var(--primary-hue), 35%, 22%);

        /* Focus ring (token) */
        --ring: hsl(var(--primary-hue), 60%, 50%);

        /* Radii (shadcn-like rounded corners; cards use rounded-xl per reference). [1] */
        --radius-card: 16px;
        --radius-control: 12px;
        --radius-pill: 999px;

        /* Spacing scale (native feel: consistent rhythm) */
        --space-1: 6px;
        --space-2: 10px;
        --space-3: 14px;
        --space-4: 18px;
        --space-5: 22px;
        --space-6: 28px;

        /* Control sizes */
        --control-h: 44px;
        --nav-h: 64px;
        --topbar-h: 56px;
      }

      .dark {
        /* Dark theme surfaces still use the same primary hue and surface levels pattern. [1] */
        --primary: hsl(var(--primary-hue), 70%, 70%);
        --on-primary: hsl(var(--primary-hue), 28%, 10%);

        --surface-container-lowest: hsl(var(--primary-hue), 18%, 10%); /* derived dark zone */
        --surface-container-low:    hsl(var(--primary-hue), 18%, 12%);
        --surface-container:        hsl(var(--primary-hue), 18%, 14%);
        --surface-container-high:   hsl(var(--primary-hue), 18%, 16%);

        --on-surface: hsl(0, 0%, 96%);
        --on-surface-variant: hsl(0, 0%, 72%);

        --accent-container: hsl(var(--primary-hue), 22%, 18%);
        --on-accent-container: hsl(var(--primary-hue), 70%, 82%);

        --ring: hsl(var(--primary-hue), 70%, 70%);
      }

      body {
        font-family: var(--font-sans);
        background: var(--surface-container-lowest);
        color: var(--on-surface);
      }

      .material-symbols-outlined {
        font-variation-settings: "FILL" 0, "wght" 600, "GRAD" 0, "opsz" 24;
        line-height: 1;
      }

      /* ===== Layout: Application shell regions ===== [8] */
      #app-shell {
        height: 100vh;
        display: flex;
        background: var(--surface-container-lowest);
        color: var(--on-surface);
      }

      /* Sidebar (desktop) */
      #region-sidebar {
        width: 280px;
        padding: var(--space-4);
        background: var(--surface-container-lowest);
      }

      /* Main column */
      #main-col {
        flex: 1;
        display: flex;
        flex-direction: column;
        min-width: 0;
      }

      /* Topbar */
      #region-topbar {
        height: var(--topbar-h);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0 var(--space-4);
        background: var(--surface-container-lowest);
      }

      /* Main content */
      #region-main {
        flex: 1;
        overflow: auto;
        padding: var(--space-4);
        padding-bottom: calc(var(--nav-h) + var(--space-4));
        background: var(--surface-container-low);
      }

      /* Responsive breakpoints: desktop sidebar, mobile bottom nav <768px. [1] */
      @media (max-width: 768px) {
        #region-sidebar { display: none; } [1]
        #bottom-nav { display: flex; } [1]
        #region-main { padding: var(--space-3); }
        #region-topbar { padding: 0 var(--space-3); }
      }
      @media (min-width: 769px) {
        #region-sidebar { display: block; }
        #bottom-nav { display: none; }
        #region-main { padding-bottom: var(--space-4); }
      }

      /* ===== Flat, borderless, zone-based components ===== [6] */
      /* Cards: rounded-xl, no borders, no shadows, separation via surface zones. [1][6] */
      .card {
        background: var(--surface-container-lowest);
        border-radius: var(--radius-card); /* rounded-xl feel [1] */
        padding: var(--space-5);
      }

      .card + .card {
        margin-top: var(--space-4);
      }

      .zone {
        background: var(--surface-container-low);
        border-radius: var(--radius-card);
        padding: var(--space-4);
      }

      .muted {
        color: var(--on-surface-variant);
      }

      .h1 {
        font-family: var(--font-head);
        font-size: 34px;
        line-height: 1.05;
        letter-spacing: -0.02em;
      }

      .h2 {
        font-family: var(--font-head);
        font-size: 16px;
        font-weight: 700;
        letter-spacing: -0.01em;
      }

      .p {
        font-size: 16px;
        line-height: 1.45;
      }

      /* Controls: shadcn-like corner radius and correct token-based foreground/background mapping. [3] */
      .btn {
        height: var(--control-h);
        padding: 0 var(--space-4);
        border: 0;              /* no borders [6] */
        box-shadow: none;       /* no shadows (flat 2.0 style) */
        border-radius: var(--radius-control);
        font: 600 14px/1 var(--font-head);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        background: transparent;
        color: var(--on-surface);
        cursor: pointer;
        -webkit-tap-highlight-color: transparent;
      }

      .btn-primary {
        background: var(--primary);
        color: var(--on-primary);
      }

      .btn-ghost {
        background: var(--accent-container);
        color: var(--on-accent-container);
      }

      .btn:focus-visible {
        outline: none;
        box-shadow: 0 0 0 2px var(--ring);
      }

      .input {
        height: var(--control-h);
        width: 100%;
        border: 0;              /* no borders [6] */
        box-shadow: none;       /* no shadows */
        border-radius: var(--radius-control);
        padding: 0 var(--space-4);
        background: var(--surface-container);
        color: var(--on-surface);
        font-size: 16px;
      }

      .input::placeholder {
        color: var(--on-surface-variant);
      }

      .input:focus {
        outline: none;
        box-shadow: 0 0 0 2px var(--ring);
      }

      /* Segmented tabs: flat, borderless, zone-based. [6] */
      .tabs {
        display: inline-flex;
        padding: 4px;
        border-radius: var(--radius-pill);
        background: var(--surface-container);
        gap: 4px;
      }

      .tab {
        height: 36px;
        padding: 0 14px;
        border: 0;
        border-radius: var(--radius-pill);
        background: transparent;
        color: var(--on-surface-variant);
        font: 600 13px/1 var(--font-head);
        cursor: pointer;
      }

      .tab[aria-selected="true"] {
        background: var(--surface-container-high);
        color: var(--on-surface);
      }

      .tab:focus-visible {
        outline: none;
        box-shadow: 0 0 0 2px var(--ring);
      }

      /* Sidebar nav items (flat) */
      .nav-list { margin-top: var(--space-3); display: flex; flex-direction: column; gap: 6px; }
      .nav-item {
        height: 44px;
        border-radius: var(--radius-control);
        border: 0;
        background: var(--surface-container-low);
        color: var(--on-surface);
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 0 var(--space-4);
        text-decoration: none;
        font: 600 14px/1 var(--font-head);
      }

      /* Bottom nav (mobile) */
      #bottom-nav {
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        height: var(--nav-h);
        padding: 10px 14px calc(env(safe-area-inset-bottom) + 10px) 14px;
        background: var(--surface-container-lowest);
        align-items: center;
        justify-content: center;
      }

      .bottom-nav-inner {
        width: min(520px, 100%);
        background: var(--surface-container);
        border-radius: 22px;
        padding: 8px;
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 8px;
      }

      .bottom-btn {
        height: 44px;
        border-radius: 18px;
        border: 0;
        background: var(--surface-container-low);
        color: var(--on-surface);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
      }

      .bottom-btn[aria-current="page"] {
        background: var(--primary);
        color: var(--on-primary);
      }
    </style>

    <script>
      function setTheme(mode) {
        var root = document.documentElement;
        if (mode === "dark") {
          root.classList.add("dark");
        } else {
          root.classList.remove("dark");
        }
        localStorage.setItem("theme", mode);
        syncThemeUI();
      }

      function bootTheme() {
        var saved = localStorage.getItem("theme");
        if (saved === "dark" || saved === "light") {
          setTheme(saved);
        } else {
          setTheme("light");
        }
      }

      function syncThemeUI() {
        var isDark = document.documentElement.classList.contains("dark");
        var lightTab = document.getElementById("theme-light");
        var darkTab = document.getElementById("theme-dark");
        if (lightTab && darkTab) {
          lightTab.setAttribute("aria-selected", isDark ? "false" : "true");
          darkTab.setAttribute("aria-selected", isDark ? "true" : "false");
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        bootTheme();
      });
    </script>
  </head>

  <body>
    <div id="app-shell">
      <!-- Sidebar region (desktop) -->
      <aside id="region-sidebar">
        <div class="card">
          <div class="h2 muted">Navigation</div>
          <div class="nav-list">
            <a class="nav-item" href="#home">
              <span class="material-symbols-outlined" aria-hidden="true">home</span>
              Home
            </a>
            <a class="nav-item" href="#agents">
              <span class="material-symbols-outlined" aria-hidden="true">hub</span>
              Agents
            </a>
            <a class="nav-item" href="#chat">
              <span class="material-symbols-outlined" aria-hidden="true">chat</span>
              Chat
            </a>
            <a class="nav-item" href="#settings">
              <span class="material-symbols-outlined" aria-hidden="true">settings</span>
              Settings
            </a>
          </div>
        </div>
      </aside>

      <!-- Main column -->
      <div id="main-col">
        <!-- Topbar region -->
        <header id="region-topbar">
          <div class="h2" style="font-family: var(--font-head); font-size: 18px;">Prometheus</div>

          <div style="display: flex; align-items: center; gap: 10px;">
            <div class="tabs" role="tablist" aria-label="Theme">
              <button id="theme-light" class="tab" type="button" aria-selected="true" onclick="setTheme('light')">
                Light
              </button>
              <button id="theme-dark" class="tab" type="button" aria-selected="false" onclick="setTheme('dark')">
                Dark
              </button>
            </div>

            <button class="btn btn-primary" type="button">
              <span class="material-symbols-outlined" aria-hidden="true">add</span>
              New
            </button>
          </div>
        </header>

        <!-- Main content region (HTMX swap target) -->
        <main id="region-main">
          <section class="card">
            <div class="h1">Flat Material 3 zones × shadcn-like controls</div>
            <div class="p muted" style="margin-top: var(--space-3);">
              Borderless: no borders, no shadows—only zone backgrounds and contrast for hierarchy. [6]
            </div>

            <div style="margin-top: var(--space-5); display: flex; flex-wrap: wrap; gap: 12px; align-items: center;">
              <div class="tabs" role="tablist" aria-label="Example tabs">
                <button class="tab" type="button" aria-selected="true">Overview</button>
                <button class="tab" type="button" aria-selected="false">Activity</button>
                <button class="tab" type="button" aria-selected="false">Settings</button>
              </div>

              <div style="flex: 1 1 260px; min-width: 220px;">
                <input class="input" type="search" placeholder="Search…" />
              </div>

              <button class="btn btn-ghost" type="button">
                <span class="material-symbols-outlined" aria-hidden="true">tune</span>
                Filters
              </button>
            </div>
          </section>

          <section class="card">
            <div class="h2">Card (rounded, flat)</div>
            <div class="p muted" style="margin-top: var(--space-2);">
              Correct pattern is zone background + padding + rounded corners, not borders. [1]
            </div>
            <div class="zone" style="margin-top: var(--space-4);">
              <div class="h2" style="font-size: 14px;">Surface container</div>
              <div class="p muted" style="margin-top: var(--space-2); font-size: 14px;">
                This “depth” is achieved by using different surface-container levels, not shadows. [1][6]
              </div>
            </div>
          </section>

          <section class="card">
            <div class="h2">HTMX region swap demo</div>
            <div class="p muted" style="margin-top: var(--space-2);">
              This page uses an application shell with swap regions (sidebar/topbar/main). [8]
            </div>

            <div style="margin-top: var(--space-4); display: flex; gap: 10px; flex-wrap: wrap;">
              <button
                class="btn btn-ghost"
                type="button"
                hx-get="/fragment-a"
                hx-target="#region-main"
                hx-swap="innerHTML"
              >
                Fragment A
              </button>
              <button
                class="btn btn-ghost"
                type="button"
                hx-get="/fragment-b"
                hx-target="#region-main"
                hx-swap="innerHTML"
              >
                Fragment B
              </button>
            </div>

            <div class="p muted" style="margin-top: var(--space-3); font-size: 14px;">
              In a standalone file without a backend, these endpoints won’t resolve (expected), but the HTMX wiring is correct for an app shell. [8]
            </div>
          </section>
        </main>

        <!-- Mobile bottom navigation -->
        <nav id="bottom-nav" aria-label="Bottom navigation">
          <div class="bottom-nav-inner">
            <button class="bottom-btn" type="button" aria-current="page" aria-label="Home">
              <span class="material-symbols-outlined" aria-hidden="true">home</span>
            </button>
            <button class="bottom-btn" type="button" aria-label="Chat">
              <span class="material-symbols-outlined" aria-hidden="true">chat</span>
            </button>
            <button class="bottom-btn" type="button" aria-label="Agents">
              <span class="material-symbols-outlined" aria-hidden="true">hub</span>
            </button>
            <button class="bottom-btn" type="button" aria-label="Settings">
              <span class="material-symbols-outlined" aria-hidden="true">settings</span>
            </button>
          </div>
        </nav>
      </div>
    </div>
  </body>
</html>
