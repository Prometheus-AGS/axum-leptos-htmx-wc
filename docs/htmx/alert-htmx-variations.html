<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Alert — HTMX Variations (single file)</title>

  <!-- HTMX included via CDN for portable HTMX artifacts. [5] -->
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>

  <style>
    :root{
      --primary-hue: 210;
      --primary: hsl(var(--primary-hue) 60% 55%);
      --on-surface: hsl(var(--primary-hue) 15% 92%);
      --on-surface-variant: hsl(var(--primary-hue) 10% 70%);
      --surface-container-lowest: hsl(var(--primary-hue) 15% 9%);
      --surface-container-low: hsl(var(--primary-hue) 14% 12%);
      --surface-container: hsl(var(--primary-hue) 14% 14%);
      --surface-container-high: hsl(var(--primary-hue) 14% 17%);
      --shadow: 0 18px 45px rgba(0,0,0,.55), 0 2px 10px rgba(0,0,0,.38);
      --r-lg: 16px;
      --transition-base: 300ms cubic-bezier(.4,0,.2,1);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono","Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      --danger: hsl(0 70% 60%);
      --danger-bg: hsla(0 70% 20% / .35);
    }
    *{box-sizing:border-box}
    body{
      margin:0; padding:22px;
      font-family: var(--sans);
      background: radial-gradient(circle at top left, var(--surface-container-lowest) 0, #000 100%);
      color: var(--on-surface);
    }
    .wrap{max-width:1100px; margin:0 auto;}
    .zone-card{background: var(--surface-container-low); border-radius: var(--r-lg); padding: 16px; box-shadow: var(--shadow); transition: background var(--transition-base);}
    h1{font-size:16px; margin:0 0 6px 0;}
    .sub{color:var(--on-surface-variant); font-size:13px; margin:0 0 14px 0; line-height:1.4;}
    .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(320px,1fr)); gap:12px;}
    .panel{background: var(--surface-container); border-radius: var(--r-lg); padding: 12px;}
    .titleRow{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:10px;}
    .title{font-size:13px; font-weight:650;}
    .pill{font-size:11px; color: var(--on-surface-variant); background: color-mix(in srgb, var(--surface-container-high) 70%, transparent); padding: 3px 8px; border-radius: 999px; font-family: var(--mono);}

    .alert{border-radius: var(--r-lg); padding: 12px; background: var(--surface-container-high); transition: all var(--transition-base);}
    .alert--default{background: color-mix(in srgb, var(--primary) 10%, var(--surface-container-high));}
    .alert--destructive{background: color-mix(in srgb, var(--danger-bg) 85%, var(--surface-container-high)); color: var(--on-surface);}

    .alertTitle{font-weight:750; font-size: 13px; margin: 0 0 4px 0;}
    .alertDesc{margin:0; font-size:12px; color: var(--on-surface-variant); line-height:1.35;}
    .alert--destructive .alertDesc{ color: color-mix(in srgb, var(--on-surface) 75%, var(--on-surface-variant)); }

    .row{display:flex; gap:10px; align-items:center; flex-wrap:wrap; margin-top: 10px;}
    .btn{height: 36px; padding: 0 12px; border-radius: 12px; background: color-mix(in srgb, var(--primary) 16%, transparent); color: var(--on-surface); border: 0; cursor:pointer; font-size:12px;}
    .btnDanger{background: color-mix(in srgb, var(--danger) 18%, transparent); color: var(--danger);}

    .out{margin-top:10px; padding:10px; border-radius: var(--r-lg); background: var(--surface-container-low); color: var(--on-surface-variant); font-size:12px; min-height: 48px;}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="zone-card">
      <h1>Alert — HTMX variations</h1>
      <p class="sub">
        Standalone HTMX artifact using zone-based surfaces and token theming. [4][6]
      </p>

      <div class="grid">

        <!-- 1) Default -->
        <div class="panel">
          <div class="titleRow">
            <div class="title">1) Default</div>
            <div class="pill">title + description</div>
          </div>

          <div class="alert alert--default" role="alert">
            <div class="alertTitle">Heads up!</div>
            <p class="alertDesc">This is a default alert with title and description slots.</p>
          </div>
        </div>

        <!-- 2) Destructive -->
        <div class="panel">
          <div class="titleRow">
            <div class="title">2) Destructive</div>
            <div class="pill">variant</div>
          </div>

          <div class="alert alert--destructive" role="alert">
            <div class="alertTitle">Error</div>
            <p class="alertDesc">Something went wrong. This is the destructive variant.</p>
          </div>
        </div>

        <!-- 3) HTMX swaps alert variant -->
        <div class="panel">
          <div class="titleRow">
            <div class="title">3) Swap alert content (HTMX)</div>
            <div class="pill">hx-get</div>
          </div>

          <div class="row" style="margin-top:0">
            <button class="btn" hx-get="/fake/alert?variant=default" hx-target="#alertHost" hx-swap="innerHTML">Load default</button>
            <button class="btn btnDanger" hx-get="/fake/alert?variant=destructive" hx-target="#alertHost" hx-swap="innerHTML">Load destructive</button>
          </div>

          <div id="alertHost" style="margin-top:10px">
            <div class="alert alert--default" role="alert">
              <div class="alertTitle">Ready</div>
              <p class="alertDesc">Click a button to swap the alert fragment.</p>
            </div>
          </div>

          <div class="out" id="globalStatus"><div class="mono" style="font-family:var(--mono)">Global status: idle</div></div>
        </div>

        <!-- 4) OOB global status update -->
        <div class="panel">
          <div class="titleRow">
            <div class="title">4) OOB update (global status)</div>
            <div class="pill">hx-swap-oob</div>
          </div>

          <button class="btn" hx-post="/fake/alert/ack" hx-target="#ackOut" hx-swap="innerHTML">Acknowledge alert</button>
          <div id="ackOut" class="out">No ack yet.</div>

          <div class="sub" style="margin:10px 0 0 0">
            Uses out-of-band swaps to update UI outside the target container. [29]
          </div>
        </div>

      </div>
    </div>
  </div>

  <script>
    // Fake backend so the artifact runs standalone; real server returns fragments. [4]
    document.body.addEventListener("htmx:configRequest", (evt) => {
      const path = evt.detail.path || evt.detail.requestConfig?.path;
      if(!path || !path.startsWith("/fake/")) return;
      evt.preventDefault();

      const elt = evt.detail.elt;
      const targetSel = elt?.getAttribute("hx-target");
      const target = targetSel ? document.querySelector(targetSel) : null;

      setTimeout(() => {
        if(path.startsWith("/fake/alert?")){
          const url = new URL("http://x" + path);
          const variant = url.searchParams.get("variant") || "default";
          if(!target) return;

          if(variant === "destructive"){
            target.innerHTML = `
              <div class="alert alert--destructive" role="alert">
                <div class="alertTitle">Error</div>
                <p class="alertDesc">Loaded via HTMX swap (destructive).</p>
              </div>
            `;
          } else {
            target.innerHTML = `
              <div class="alert alert--default" role="alert">
                <div class="alertTitle">Heads up!</div>
                <p class="alertDesc">Loaded via HTMX swap (default).</p>
              </div>
            `;
          }
        } else if(path === "/fake/alert/ack"){
          if(target) {
            target.innerHTML = `
              <div>Acknowledged.</div>
              <div id="globalStatus" hx-swap-oob="true">
                <div class="mono" style="font-family:var(--mono)">Global status: alert acknowledged</div>
              </div>
            `;
          }

          // Apply OOB manually for standalone demo: in a real HTMX response, HTMX would process hx-swap-oob. [29]
          const tmp = document.createElement("div");
          tmp.innerHTML = target?.innerHTML || "";
          tmp.querySelectorAll("[hx-swap-oob]").forEach((oob) => {
            const id = oob.getAttribute("id");
            if(!id) return;
            const dest = document.getElementById(id);
            if(dest) dest.innerHTML = oob.innerHTML;
          });
        }
      }, 180);
    });
  </script>
</body>
</html>
